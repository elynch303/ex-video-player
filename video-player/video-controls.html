<link rel="import" href="../bower_components/core-icons/core-icons.html">
<link rel="import" href="../bower_components/core-icons/av-icons.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../bower_components/paper-slider/paper-slider.html">
<link rel="import" href="../bower_components/core-signals/core-signals.html">

<link rel="import" href="video-volume.html">

<polymer-element name="video-controls">

  <template>
    <style>
      :host {
        display: block;
        /*height: 50px;*/
      }
    </style>
    <div horizontal layout center>
      <paper-icon-button id="play" icon="av:play-arrow" on-click="{{playClick}}"></paper-icon-button>
      <paper-slider id="slider" on-change="{{sliderChange}}" flex></paper-slider>
      <video-volume></video-volume>
      <paper-icon-button icon="fullscreen" on-click="{{fullscreen}}"></paper-icon-button>
    </div>
    <core-signals on-core-signal-play="{{play}}"></core-signals>
    <core-signals on-core-signal-pause="{{pause}}"></core-signals>
    <core-signals on-core-signal-timeupdate="{{timeupdate}}"></core-signals>
    <core-signals on-core-signal-progress-amount="{{progress_amount}}"></core-signals>
  </template>

  <script>

    Polymer({
      togged: false,
      playClick: function() {
        !this.togged ? this.fire('core-signal', { name: "play" }) : this.fire('core-signal', { name: "pause" });
      },
      sliderChange: function(e, detail, sender) {
        this.fire('core-signal', { name: 'change', data: sender.immediateValue });
      },
      play: function() {
        this.togged = true;
        this.$.play.icon = "av:pause";
      },
      pause: function() {
        this.togged = false;
        this.$.play.icon = "av:play-arrow";
      },
      timeupdate: function(e, detail, sender) {
        this.$.slider.value = detail;
      },
      progress_amount: function(e, detail, sender) {
        this.$.slider.secondaryProgress = detail;
      },
      fullscreen: function() {
        this.fire('core-signal', { name: "fullscreen" });
      }
    });

  </script>

</polymer-element>